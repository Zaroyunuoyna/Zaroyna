<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>Zar Oyunu</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  font-family: Arial, sans-serif;
  background: #f2f4f8;
  text-align: center;
  margin: 0;
  padding: 20px;
}
h1 {
  margin-bottom: 10px;
}
.board {
  display: flex;
  justify-content: center;
  gap: 20px;
  flex-wrap: wrap;
}
.player {
  background: white;
  padding: 10px;
  border-radius: 10px;
  width: 280px;
}
.track {
  display: grid;
  grid-template-columns: repeat(10, 1fr);
  gap: 5px;
}
.cell {
  background: #e5e7eb;
  border-radius: 5px;
  height: 28px;
  font-size: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
}
.active {
  background: #2563eb;
  color: white;
}
.controls {
  margin-top: 20px;
}
button {
  padding: 10px 20px;
  font-size: 16px;
  border: none;
  border-radius: 8px;
  background: #2563eb;
  color: white;
  cursor: pointer;
}
button:disabled {
  background: gray;
}
.log {
  max-width: 600px;
  margin: 20px auto;
  background: white;
  padding: 10px;
  border-radius: 10px;
  text-align: left;
}
</style>
</head>

<body>

<h1>ðŸŽ² Zar Oyunu</h1>
<p>Ä°lk 75â€™e ulaÅŸan kazanÄ±r</p>

<div class="board">
  <div class="player">
    <h3>Oyuncu 1</h3>
    <div class="track" id="p1"></div>
    <p>Pozisyon: <span id="pos1">0</span></p>
  </div>

  <div class="player">
    <h3>Oyuncu 2</h3>
    <div class="track" id="p2"></div>
    <p>Pozisyon: <span id="pos2">0</span></p>
  </div>

  <div class="player">
    <h3>Robot</h3>
    <div class="track" id="p3"></div>
    <p>Pozisyon: <span id="pos3">0</span></p>
  </div>
</div>

<div class="controls">
  <button id="rollBtn">Zar At</button>
</div>

<div class="log" id="log"></div>

<script>
const STEPS = 75;
let pos = [0,0,0];
let turn = 0;
let finished = [];

const tracks = [
  document.getElementById("p1"),
  document.getElementById("p2"),
  document.getElementById("p3")
];

function createBoard() {
  tracks.forEach(track => {
    track.innerHTML = "";
    for (let i = 1; i <= STEPS; i++) {
      const c = document.createElement("div");
      c.className = "cell";
      c.textContent = i;
      track.appendChild(c);
    }
  });
}

function render() {
  tracks.forEach((track, i) => {
    [...track.children].forEach(c => c.classList.remove("active"));
    if (pos[i] > 0 && pos[i] <= STEPS) {
      track.children[pos[i]-1].classList.add("active");
    }
    document.getElementById("pos"+(i+1)).textContent = pos[i];
  });
}

function log(msg) {
  const d = document.createElement("div");
  d.textContent = msg;
  document.getElementById("log").prepend(d);
}

function nextTurn() {
  do {
    turn = (turn + 1) % 3;
  } while (finished.includes(turn));
}

function roll() {
  if (finished.length >= 2) {
    log("Oyun bitti!");
    document.getElementById("rollBtn").disabled = true;
    return;
  }

  const dice = Math.floor(Math.random()*6)+1;
  pos[turn] += dice;
  log(`Oyuncu ${turn+1} zar attÄ±: ${dice}`);

  if (pos[turn] >= STEPS) {
    pos[turn] = STEPS;
    finished.push(turn);
    log(`Oyuncu ${turn+1} bitirdi!`);
  }

  render();
  nextTurn();

  if (turn === 2) {
    setTimeout(roll, 1500);
  }
}

document.getElementById("rollBtn").onclick = roll;

createBoard();
render();
</script>

</body>
</html>
